<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Bookmarks Bar Switcher</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Bookmarks Bar Switcher</h1>

      <!-- First-time setup screen -->
      <div id="firstTimeSetup" class="setup-screen" style="display: none">
        <div class="welcome-message">
          <h2>🎉 Welcome to Bookmarks Bar Switcher!</h2>
          <p>This extension helps you organize your bookmarks into different "states" that you can switch between.</p>
          <p>Let's start by saving your current bookmarks bar as your first state:</p>
        </div>

        <div class="setup-form">
          <label for="firstStateName">Name your current bookmarks bar:</label>
          <input type="text" id="firstStateName" placeholder="e.g., Personal, Work, Development" maxlength="50" />
          <div class="setup-actions">
            <button id="createFirstState" class="primary">Create First State</button>
            <button id="skipSetup" class="secondary">Skip for Now</button>
          </div>
        </div>
      </div>

      <!-- Main interface (hidden until setup is complete) -->
      <div id="mainInterface" style="display: none">
        <div class="current-state">
          <label for="currentStateName">Current State Name:</label>
          <input type="text" id="currentStateName" placeholder="e.g., Personal, Work, Development" />
          <button id="saveCurrentState">Save Current State</button>
        </div>

        <div class="divider"></div>

        <div class="settings">
          <h3>Settings</h3>
          <div class="setting-item">
            <label class="toggle-label">
              <input type="checkbox" id="autoSaveToggle" />
              <span class="toggle-slider"></span>
              <span class="toggle-text">Auto-save every 5 minutes</span>
            </label>
          </div>
          <div class="setting-item">
            <label for="autoSaveInterval">Auto-save interval:</label>
            <select id="autoSaveInterval">
              <option value="1">1 minute</option>
              <option value="5" selected>5 minutes</option>
              <option value="10">10 minutes</option>
              <option value="15">15 minutes</option>
              <option value="30">30 minutes</option>
            </select>
          </div>
        </div>

        <div class="divider"></div>

        <div class="saved-states">
          <h3>Saved States</h3>
          <div id="statesList"></div>
        </div>

        <div class="divider"></div>

        <div class="actions">
          <button id="createNewState" class="primary">Create New State</button>
          <button id="refreshStates">Refresh</button>
        </div>

        <div class="divider"></div>

        <div class="data-management">
          <h3>Data Management</h3>
          <div class="export-options" id="exportOptions" style="display: none">
            <div class="export-option">
              <label>
                <input type="checkbox" id="includeBookmarks" />
                Include bookmark content
              </label>
            </div>
            <div class="privacy-options" id="privacyOptions" style="display: none">
              <label for="privacyLevel">Privacy Level:</label>
              <select id="privacyLevel">
                <option value="hidden">🔒 Hide URLs (Recommended)</option>
                <option value="domain">🌐 Show Domains Only</option>
                <option value="full">📖 Show Full URLs</option>
              </select>
            </div>
          </div>
          <div class="data-actions">
            <button id="exportStates" class="secondary">Export States</button>
            <button id="performExport" class="primary" style="display: none">Export</button>
            <button id="importStates" class="secondary">Import States</button>
            <button id="cleanupStates" class="secondary">Cleanup States</button>
            <button id="restoreStates" class="secondary">Restore States</button>
            <button id="recoverOrphaned" class="secondary">Recover Orphaned</button>
            <button id="fixStates" class="secondary">Fix States</button>
            <button id="validateStates" class="secondary">Validate States</button>
            <button id="debugStates" class="secondary">Debug States</button>
            <button id="checkStorage" class="secondary">Check Storage</button>
            <button id="resetToSetup" class="secondary">Reset to Setup</button>
            <input type="file" id="importFileInput" accept=".json" style="display: none" />
          </div>
          <div class="sync-status" id="syncStatus">
            <span class="sync-indicator" id="syncIndicator">🔄</span>
            <span class="sync-text" id="syncText">Syncing...</span>
          </div>
        </div>

        <div class="status" id="status"></div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
