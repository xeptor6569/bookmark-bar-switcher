<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Bookmarks Bar Switcher</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="header">
      <h1>Bookmarks Bar Switcher</h1>
      <div class="header-actions">
        <button id="saveCurrentState" class="save-btn" title="Save current state manually">ğŸ’¾</button>
        <button id="popOutBtn" class="pop-out-btn" title="Open in new window">â¤¢</button>
      </div>
    </div>

    <div class="container">
      <!-- First-time setup screen -->
      <div id="firstTimeSetup" class="setup-screen" style="display: none">
        <div class="welcome-message">
          <h2>ğŸ‰ Welcome to Bookmarks Bar Switcher!</h2>
          <p>This extension helps you organize your bookmarks into different "states" that you can switch between.</p>
          <p>Let's start by saving your current bookmarks bar as your first state:</p>
        </div>

        <div class="setup-form">
          <label for="firstStateName">Name your current bookmarks bar:</label>
          <input type="text" id="firstStateName" placeholder="e.g., Personal, Work, Development" maxlength="50" />
          
          <div class="setup-options">
            <label class="toggle-label">
              <span class="toggle-text">Dark Mode</span>
              <div class="toggle-switch">
                <input type="checkbox" id="setupDarkModeToggle">
                <span class="toggle-slider"></span>
              </div>
            </label>
          </div>
          
          <div class="setup-actions">
            <button id="createFirstState" class="primary">Create First State</button>
            <button id="skipSetup" class="secondary">Skip for Now</button>
          </div>
        </div>
      </div>

      <!-- Main interface (hidden until setup is complete) -->
      <div id="mainInterface" style="display: none">
        <!-- Saved States Section -->
        <div class="saved-states">
          <h3>Saved States</h3>
          <div id="statesList"></div>
          <div class="state-actions">
            <button id="createNewState" class="primary">Create New State</button>
            <button id="refreshStates" class="secondary">Refresh</button>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Settings Section -->
        <div class="settings">
          <h3>Settings</h3>
          <div class="setting-item">
            <label class="toggle-label">
              <span class="toggle-text">Auto-save every 5 minutes</span>
              <div class="toggle-switch">
                <input type="checkbox" id="autoSaveToggle" checked>
                <span class="toggle-slider"></span>
              </div>
            </label>
          </div>
          <div class="setting-item">
            <label class="toggle-label">
              <span class="toggle-text">Dark Mode</span>
              <div class="toggle-switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="toggle-slider"></span>
              </div>
            </label>
          </div>

        </div>

        <div class="divider"></div>

                <!-- Keyboard Shortcuts Section -->
        <div class="keyboard-shortcuts">
          <h3>Keyboard Shortcuts</h3>
          <div class="shortcut-list" id="shortcutList">
            <!-- Shortcuts will be populated dynamically -->
          </div>
          <div class="shortcut-note">
            <small>On Mac, use Cmd instead of Ctrl</small>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Data Management Section -->
        <div class="data-management">
          <h3>Data Management</h3>
          <div class="export-options" id="exportOptions" style="display: none">
            <div class="export-option">
              <label>
                <input type="checkbox" id="includeBookmarks" />
                Include bookmark content
              </label>
            </div>
            <div class="privacy-options" id="privacyOptions" style="display: none">
              <label for="privacyLevel">Privacy Level:</label>
              <select id="privacyLevel">
                <option value="hidden">ğŸ”’ Hide URLs (Recommended)</option>
                <option value="domain">ğŸŒ Show Domains Only</option>
                <option value="full">ğŸ“– Show Full URLs</option>
              </select>
            </div>
          </div>
          <div class="data-actions">
            <button id="exportStates" class="secondary">Export States</button>
            <button id="performExport" class="primary" style="display: none">Export</button>
            <button id="importStates" class="secondary">Import States</button>
            <button id="cleanupStates" class="secondary">Cleanup States</button>
            <input type="file" id="importFileInput" accept=".json" style="display: none" />
          </div>
          <div class="sync-status" id="syncStatus">
            <span class="sync-indicator" id="syncIndicator">ğŸ”„</span>
            <span class="sync-text" id="syncText">Syncing...</span>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Help Section -->
        <div class="help-section">
          <h3>ğŸ’¡ Quick Tips</h3>
          <div class="help-tips">
            <div class="tip-item">
              <span class="tip-icon">âŒ¨ï¸</span>
              <span class="tip-text">Use keyboard shortcuts for faster switching</span>
            </div>
            <div class="tip-item">
              <span class="tip-icon">ğŸ’¾</span>
              <span class="tip-text">Save button updates the currently active state</span>
            </div>
            <div class="tip-item">
              <span class="tip-icon">â¤¢</span>
              <span class="tip-text">Pop out button opens extension in a new window</span>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Debug Mode Section -->
        <div class="debug-mode">
          <div class="debug-toggle">
            <label class="toggle-label">
              <span class="toggle-text">Debug Mode</span>
              <div class="toggle-switch">
                <input type="checkbox" id="debugModeToggle" />
                <span class="toggle-slider"></span>
              </div>
            </label>
          </div>
          <div class="debug-options" id="debugOptions" style="display: none">
            <div class="debug-actions">
              <button id="validateStates" class="secondary">Validate States</button>
              <button id="checkStorage" class="secondary">Check Storage</button>
              <button id="recoverOrphaned" class="secondary">Recover Orphaned</button>
              <button id="resetToSetup" class="danger">Reset to Setup</button>
            </div>
            <div class="debug-info">
              <small>Debug mode provides advanced troubleshooting tools for developers and power users.</small>
            </div>
          </div>
        </div>

        <div class="status" id="status"></div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
